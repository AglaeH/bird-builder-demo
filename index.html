<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Bird Builder AR Demo</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <video id="cameraVideo" autoplay playsinline muted></video>

  <header class="topbar">
    <div class="pill">
      <select id="birdSelect" aria-label="選擇鳥">
        <option value="sparrow">麻雀</option>
        <option value="bulbul">白頭翁</option>
        <option value="dove">珠頸斑鳩</option>
        <option value="drongo">大卷尾</option>
        <option value="whiteeye">綠繡眼</option>
      </select>
      <span class="tag">demo</span>
    </div>

    <div class="pill pill-wide">
      <span id="statusClues">線索 0/5</span>
      <span class="sep">|</span>
      <span id="statusNeed">待掃 —</span>
      <span class="sep">|</span>
      <span id="statusAi">AI 提示 2/2</span>
    </div>
  </header>

  <section class="help">
    <p>流程：按 <b>餵鳥</b> → 系統指定「要掃哪張線索卡」→ <b>掃對</b>才獲得線索。</p>
    <p>集滿 5 張線索 → <b>開始辨認（1–5）</b>；每題答對會 <b>逐步拼出部位</b>。</p>
  </section>

  <nav class="bottombar">
    <button id="btnStartCamera" class="btn ghost">啟動相機</button>
    <button id="btnFeed" class="btn primary">餵鳥（掉落線索）</button>
    <button id="btnScan" class="btn">掃描線索卡</button>
    <button id="btnQuiz" class="btn" disabled>開始辨認（0/5）</button>
    <button id="btnReset" class="btn ghost">重置本鳥</button>
  </nav>

  <div id="scanOverlay" class="scanOverlay" aria-hidden="true">
    <div class="scanHudLayer" aria-hidden="true">
      <div class="scanHole" id="scanHole">
        <div class="scanLine"></div>
      </div>
      <div class="scanToast" id="scanToast" hidden></div>
    </div>

    <div class="scanSheet" role="dialog" aria-label="掃描線索卡">
      <div class="sheetHead">
        <h2>掃描線索卡</h2>
        <button id="btnCloseScan" class="iconBtn" aria-label="關閉">×</button>
      </div>

      <div class="card">
        <div class="muted">目前需要掃描：</div>
        <div class="strong" id="scanNeedText">—</div>
        <div class="muted mt8">提示：</div>
        <div id="scanHintText" class="hintText">請先按「餵鳥」，系統才會指定要掃哪張線索卡。</div>
      </div>

      <div class="row mt12">
        <button id="btnCancelScan" class="btn ghost wide">取消掃描</button>
      </div>
    </div>
  </div>

  <div id="feedOverlay" class="feedOverlay" aria-hidden="true">
    <div class="feedCard">
      <div class="feedTitle">餵食中…</div>
      <div class="feedAnim" aria-hidden="true">
        <div class="seed s1"></div>
        <div class="seed s2"></div>
        <div class="seed s3"></div>
        <div class="seed s4"></div>
        <div class="bowl"></div>
      </div>
      <div class="feedSub" id="feedSubText">掉落一張線索卡</div>
    </div>
  </div>

  <div id="quizModal" class="modal" aria-hidden="true">
    <div class="modalPanel">
      <div class="modalHead">
        <h2 id="quizTitle">辨認鳥類</h2>
        <button id="btnCloseQuiz" class="iconBtn" aria-label="關閉">×</button>
      </div>

      <div class="steps" id="stepDots"></div>

      <div class="promptBox">
        <div class="promptTitle" id="quizPromptTitle">—</div>
        <div class="promptClue" id="quizClueText">你收集到的線索：—</div>
      </div>

      <div class="optionsGrid" id="quizOptions"></div>

      <div class="aiRow">
        <button id="btnAiHint" class="btn wide">AI 提示（不爆雷）</button>
        <div id="aiBubble" class="aiBubble" hidden></div>
      </div>

      <div class="row">
        <div class="muted small">提示只在答題時可用；不爆雷，只引導觀察重點。</div>
      </div>
    </div>
  </div>

  <div id="assembleModal" class="modal" aria-hidden="true">
    <div class="modalPanel">
      <div class="modalHead">
        <h2 id="assembleTitle">拼裝完成</h2>
        <button id="btnCloseAssemble" class="iconBtn" aria-label="關閉">×</button>
      </div>

      <div class="assembleStage">
        <div id="birdStage" class="birdStage"></div>
      </div>

      <div class="row">
        <div id="assembleText" class="assembleText">—</div>
      </div>

      <div class="row">
        <button id="btnContinue" class="btn primary wide">下一步</button>
      </div>
    </div>
  </div>

  <div id="globalToast" class="globalToast" hidden></div>

  <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
  <script src="./data.js"></script>
  <script src="./app.js"></script>
</body>
</html>
